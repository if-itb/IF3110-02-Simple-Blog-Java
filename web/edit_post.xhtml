<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Deskripsi Blog" />
    <meta name="author" content="Judul Blog" />

    <h:outputStylesheet name="assets/css/screen.css"/>
    <h:outputStylesheet name="assets/css/simple-blog.css"/>
    <h:outputScript name="assets/js/simple-blog.js"/>
    <!--<link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico" />-->

    <title>Simple Blog | Edit Post</title>
</h:head>

<h:body class="default">
<div class="wrapper">

    <ui:insert id="header">
        <ui:include src="/templates/header.xhtml"/>
    </ui:insert>

    <article class="art simple post">
        <h2 class="art-title" style="margin-bottom:40px">-</h2>

        <div class="art-body">
            <div class="art-body-inner">
                <h2>Edit Post</h2>

                <div id="contact-area">
                    <h:form>
                        <h:outputLabel for="judul" value="Judul:" />
                        <h:inputText id="judul" binding="#{title}" p:required="required" value="#{postController.post.title}"/>

                        <h:outputLabel for="tanggal" value="Tanggal:"/>
                        <h:inputText id="tanggal" binding="#{date}" p:required="required" p:type="date" value="#{postController.post.date}"/>

                        <h:outputLabel for="konten" value="Konten:"/>
                        <h:inputTextarea id="konten" rows="20" cols="20" p:required="required" binding="#{content}" value="#{postController.post.content}"/>
                        
                        <h:outputLabel rendered="#{userController.user.role eq 'admin' or userController.user.role eq 'editor'}" for="published" value="Publikasi:"/>
                        <h:selectBooleanCheckbox rendered="#{userController.user.role eq 'admin' or userController.user.role eq 'editor'}" id="published" binding="#{publish}" value="#{postController.post.published}" style="margin-bottom: 30px; width: 20px"/><br/>

                        <h:commandButton action="#{postController.updatePost(postController.post.id, title.value, date.value, content.value, publish.value)}" value="Simpan" class="submit-button" onclick="return validateDate();" style="margin-left: 120px"/>
                    </h:form>
                </div>
            </div>
        </div>
    </article>

    <ui:insert id="footer">
        <ui:include src="/templates/footer.xhtml"/>
    </ui:insert>

</div>

<script type="text/javascript">
    function validateDate(){
      var inputDate = document.getElementById("j_idt2:tanggal").value + "-";
      var inputYear=""; var inputMonth=""; var inputDay="";
      var i = 0;
      
      while(inputDate.charAt(i) !=='-'){
        inputYear = inputYear + inputDate.charAt(i);
        i++;
      }
      i++;
      while(inputDate.charAt(i) !=='-'){
        inputMonth = inputMonth + inputDate.charAt(i);
        i++;
      }
      i++;
      while(inputDate.charAt(i) !=='-'){
        inputDay = inputDay + inputDate.charAt(i);
        i++;
      }
      var formDate = new Date();
      formDate.setFullYear(inputYear,inputMonth-1,inputDay);
      //formDate.setHours(23);
      //formDate.setMinutes(59);
      //formDate.setSeconds(59);
      var cekDate = new Date();
      if(formDate &lt; cekDate){
            alert("Tanggal post tidak boleh lebih kecil dari hari ini");
            return false;
       }
   }
</script>

</h:body>
</html>